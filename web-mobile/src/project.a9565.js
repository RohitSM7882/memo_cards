window.__require=function t(e,i,o){function n(r,l){if(!i[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var a="function"==typeof __require&&__require;if(!l&&a)return a(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){return n(e[r][1][t]||t)},h,h.exports,t,e,i,o)}return i[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<o.length;r++)n(o[r]);return n}({script:[function(t,e,i){"use strict";cc._RF.push(e,"46c3e8R/WtN1IG2eYD2aYh3","script");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,r=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(r=(c<3?n(r):c>3?n(e,i,r):n(e,i))||r);return c>3&&r&&Object.defineProperty(e,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,r=c.ccclass,l=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nextButton=null,e.intro=null,e.outro=null,e.level1=null,e.level2=null,e.level3=null,e.cardNode=null,e.cardList=[],e.valuesList=[],e.touchDown=!1,e.currentSelected=null,e.optionSelectedList=[],e.flipCount=0,e.levelNumber=0,e.isCorrect=null,e.activeCardList=[],e}return o(e,t),e.prototype.onLoad=function(){this.disableAllExceptThis(this.intro),this.nextButton.interactable=!1,this.nextButton.node.opacity=0},e.prototype.disableAllExceptThis=function(t){var e=this;void 0===t&&(t=null),this.levelNumber>0&&this.unsubscribeEvent();var i=this.node.getChildByName("blackScreen");cc.tween(i).call(function(){i.active=!0}).to(.5,{opacity:255}).call(function(){e.intro.active=!1,e.level1.active=!1,e.level2.active=!1,e.level3.active=!1,e.outro.active=!1,null!=t&&(t.active=!0)}).to(.5,{opacity:0}).call(function(){i.active=!1}).start()},e.prototype.subscribeEvent=function(){var t=this;this.cardNode.children.forEach(function(e){e.on(cc.Node.EventType.TOUCH_START,t.onTouchStart.bind(t)),e.on(cc.Node.EventType.TOUCH_END,t.onTouchEnd.bind(t)),e.on(cc.Node.EventType.TOUCH_CANCEL,t.onTouchEnd.bind(t))})},e.prototype.unsubscribeEvent=function(){this.cardNode.children.forEach(function(t){t.off(cc.Node.EventType.TOUCH_START),t.off(cc.Node.EventType.TOUCH_END),t.off(cc.Node.EventType.TOUCH_CANCEL)})},e.prototype.onTouchStart=function(t){this.touchDown||(this.touchDown=!0,this.currentSelected=t.target,this.flipCount+=1,this.optionSelectedList.push(parseInt(this.currentSelected.name)),cc.tween(this.currentSelected).to(0,{opacity:this.currentSelected.opacity-50}).start())},e.prototype.onTouchEnd=function(){null!=this.currentSelected&&(this.touchDown=!1,this.currentSelected.opacity=255,this.flipCard(this.currentSelected),this.currentSelected=null)},e.prototype.onPlayButtonClicked=function(){this.loadLevel(1)},e.prototype.shuffle=function(t){return t.sort(function(){return Math.random()-.5}),t},e.prototype.activateNextButton=function(){this.nextButton.node.runAction(cc.fadeIn(.5)),this.nextButton.interactable=!0},e.prototype.onNextButtonClicked=function(){this.loadLevel(this.levelNumber+1),this.nextButton.node.runAction(cc.fadeOut(.5)),this.nextButton.interactable=!1},e.prototype.flipCard=function(t){var e=this;cc.tween(t).to(.15,{scaleX:1==t.scaleX?0:1}).call(function(){cc.tween(e.valuesList[parseInt(t.name)-1]).to(.15,{scaleX:-1==e.valuesList[parseInt(t.name)-1].scaleX?0:-1}).call(function(){2==e.flipCount&&(e.playFeedback(),e.unsubscribeEvent())}).start()}).start()},e.prototype.flipReverseCard=function(){var t=this;cc.tween(this.valuesList[this.optionSelectedList[0]-1]).to(.15,{scaleX:0}).call(function(){cc.tween(t.cardList[t.optionSelectedList[0]-1]).to(.15,{scaleX:1}).start()}).start(),cc.tween(this.valuesList[this.optionSelectedList[1]-1]).to(.15,{scaleX:0}).call(function(){cc.tween(t.cardList[t.optionSelectedList[1]-1]).to(.15,{scaleX:1}).start()}).start()},e.prototype.loadLevel=function(t){switch(t){case 1:this.loadLevel1();break;case 2:this.loadLevel2();break;case 3:this.loadLevel3();break;case 4:this.loadOutro()}},e.prototype.loadLevel1=function(){this.disableAllExceptThis(this.level1),this.levelNumber=1,this.cardNode=this.level1.getChildByName("cards"),this.cardList=this.cardNode.children,this.valuesList=this.level1.getChildByName("values").children;var t=this.shuffle(["AB","BA","AB","BA"]);cc.log(t);var e=0;this.valuesList.forEach(function(i){i.scaleX=0,i.children[0].scaleX=-1,i.children[0].getComponent(cc.Label).string=String(t[e]),e++}),this.activeCardList=[!0,!0,!0,!0],this.subscribeEvent()},e.prototype.loadLevel2=function(){this.disableAllExceptThis(this.level2),this.levelNumber=2,this.cardNode=this.level2.getChildByName("cards"),this.cardList=this.cardNode.children,this.valuesList=this.level2.getChildByName("values").children;var t=this.shuffle(["ABC","BAC","CAB","BCA","ABC","BAC","CAB","BCA"]);cc.log(t);var e=0;this.valuesList.forEach(function(i){i.scaleX=0,i.children[0].scaleX=-1,i.children[0].getComponent(cc.Label).string=String(t[e]),e++}),this.activeCardList=[!0,!0,!0,!0,!0,!0,!0,!0],this.resetLevel()},e.prototype.loadLevel3=function(){this.disableAllExceptThis(this.level3),this.levelNumber=3,this.cardNode=this.level3.getChildByName("cards"),this.cardList=this.cardNode.children,this.valuesList=this.level3.getChildByName("values").children;var t=this.shuffle(["ABC","BAC","CAB","BCA","CBA","ABC","BAC","CAB","BCA","CBA"]);cc.log(t);var e=0;this.valuesList.forEach(function(i){i.scaleX=0,i.children[0].scaleX=-1,i.children[0].getComponent(cc.Label).string=String(t[e]),e++}),this.activeCardList=[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],this.resetLevel()},e.prototype.loadOutro=function(){this.disableAllExceptThis(this.outro)},e.prototype.playFeedback=function(){var t=this;this.unsubscribeEvent(),this.isCorrect=this.checkisCorrect(),cc.log(this.isCorrect),this.isCorrect?this.playCfAnimation():this.scheduleOnce(function(){t.flipReverseCard()},.5),this.isAllCardsPlayed()?(cc.log("Game Level Completed"),this.scheduleOnce(function(){t.activateNextButton()},2)):this.scheduleOnce(function(){t.resetLevel()},1)},e.prototype.isAllCardsPlayed=function(){var t=!0;return this.activeCardList.forEach(function(e){e&&(t=!1)}),t},e.prototype.resetLevel=function(){this.flipCount=0,this.optionSelectedList=[],this.subscribeEvent()},e.prototype.playCfAnimation=function(){var t=this,e=this.optionSelectedList[0],i=this.optionSelectedList[1],o=0,n=(this.cardList[e-1].position,this.cardList[i-1].position,[this.valuesList[e-1],this.valuesList[i-1]]);this.optionSelectedList.forEach(function(e){t.activeCardList[e-1]=!1}),n.forEach(function(e){o++;var i=t.node.getChildByName("cfAnimation");i.children[o].position=e.position,i.children[o].height=e.height,i.children[o].width=e.width,i.children[o].getComponent(cc.Sprite).spriteFrame=e.getComponent(cc.Sprite).spriteFrame,i.children[o].scale=1;var n=i.children[o].children[0].getComponent(cc.Label);n.string=e.children[0].getComponent(cc.Label).string,n.node.width=e.children[0].width,n.fontSize=e.children[0].getComponent(cc.Label).fontSize,n.overflow=e.children[0].getComponent(cc.Label).overflow,n.lineHeight=e.children[0].getComponent(cc.Label).lineHeight});var c=this.node.getChildByName("cfAnimation");cc.tween(c.getChildByName("blackScreen")).to(.5,{opacity:200}).call(function(){cc.tween(c.children[1]).to(.5,{position:cc.v2(0,0)},{easing:"quadOut"}).delay(.5).to(.5,{scale:0},{easing:"quadOut"}).start(),cc.tween(c.children[2]).to(.5,{position:cc.v2(0,0)},{easing:"quadOut"}).delay(.5).to(.5,{scale:0},{easing:"quadOut"}).start(),n[0].opacity=100,n[1].opacity=100}).delay(2).to(.5,{opacity:0}).start()},e.prototype.checkisCorrect=function(){return this.valuesList[this.optionSelectedList[0]-1].children[0].getComponent(cc.Label).string==this.valuesList[this.optionSelectedList[1]-1].children[0].getComponent(cc.Label).string},n([l(cc.Button)],e.prototype,"nextButton",void 0),n([l(cc.Node)],e.prototype,"intro",void 0),n([l(cc.Node)],e.prototype,"outro",void 0),n([l(cc.Node)],e.prototype,"level1",void 0),n([l(cc.Node)],e.prototype,"level2",void 0),n([l(cc.Node)],e.prototype,"level3",void 0),e=n([r],e)}(cc.Component);i.default=s,cc._RF.pop()},{}]},{},["script"]);